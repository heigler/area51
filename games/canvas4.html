<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html, charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Exemplo 6: movimento</title>

    <style type="text/css" media="screen">
        #fps {
            clear: both;
        }
        #canvas{
            clear: both;
            border: 1px solid #c0c0c0;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="800" height="600">
        VocÃª precisa de um navegador melhor.
    </canvas>

    <script type="text/javascript" charset="utf-8">
        var context;
        var WIDTH = 800;
        var HEIGHT = 600;
        var x;
        var y;
        var dx = 4;
        var dy = 8;

        var lastTime = new Date();
        var fps = 0;
        var frameCount = 0;

        function randomNumber(max){
            return Math.floor(Math.random() * max + 1);
        }
        
        function setXY(){
            x = randomNumber(WIDTH);
            y = randomNumber(HEIGHT);
        }

        function clear(){
            context.clearRect(0, 0, WIDTH, HEIGHT);
        }

        function drawCircle(x, y, radius){
            context.beginPath();
            context.arc(x, y, radius, 0, Math.PI * 2, true);
            context.fill();
        }

        function draw(){
            clear();
            context.fillStyle = 'blue';
            drawCircle(x, y, 60);
            
            context.fillStyle = 'green';
            drawCircle(x, y, 10);

            if (x + dx > WIDTH || x + dx < 0){
                dx = -dx;
            }

            if (y + dy > HEIGHT || y + dy < 0){
                dy = -dy;
            }

            x += dx;
            y += dy;

        }

        function init(canvasId){
            context = document.getElementById(canvasId).getContext('2d');
            setXY();
            return window.setInterval(draw, 10);
        }

        init('canvas');
    </script>
</body>
</html>